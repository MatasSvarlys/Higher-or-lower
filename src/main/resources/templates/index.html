<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link th:href="@{/styles/cssandjs/homepage.css}" rel="stylesheet" />
</head>
<body>
<div id="root">
    <section class="homepage-chooser">
        <h1 class="bigger-text">The Higher or Lower Game<br>Bralukai edition</h1>
        <h2 class="smaller-text"><strong>What gets Googled more?</strong></h2>

        <div th:if="${session.user}" >
            <span class="smaller-text" th:text="'Hello!' + ${session.user.username}"></span>
        </div>

        <div class="button-container">

            <a th:if="${loggedIn}" onclick="playRandomGame();" id="play" class="button-link" >Play</a>
            <!--<a th:if="${loggedIn}" th:href="@{'/game-board/'+ ${Id}}" class="button-link">Play</a>-->
            <a th:if="${!loggedIn}" th:href="@{/login}" class="button-link">Log in first!</a>

            <a href="#how-to-play-popup" class="button-link">How to Play?</a>
            <a href="#scoreboard-popup" class="button-link">View Scoreboard</a>
        </div>
        <div th:if="${loggedIn}" class="button-container">
            <!-- Add a logout button -->
            <form action="#" th:action="@{/logout}"
                  method="POST">
                <input type="submit" value="Logout" class="btn btn-outline-primary mt-2" />
            </form>
        </div>
    </section>
</div>
<div id="scoreboard-popup" class="popup">
    <div class="popup-content">
        <h2>Scoreboard</h2>
        <table class="scoreboard-table">
            <thead>
            <tr>
                <th class="left1">Name</th>
                <th class="right">Highscore</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="player, playerStat : ${Score}">
                <td class="left1" th:text="${player.name}"></td>
                <td class="right">
                    <span th:text="${player.highscore}">&nbsp;</span>
                </td>
                <td class="left2">
                    <span th:if="${playerStat.index == 0}" class="emoji">ðŸ¥‡</span>
                    <span th:if="${playerStat.index == 1}" class="emoji">ðŸ¥ˆ</span>
                    <span th:if="${playerStat.index == 2}" class="emoji">ðŸ¥‰</span>
                </td>
            </tr>
            </tbody>
        </table>
        <a href="#" class="close-popup">Close</a>
    </div>
</div>
<div id="how-to-play-popup" class="popup">
    <div class="popup-content">
        <h2>How to Play?</h2>
        <div style="text-align: left; font-size: 125%">
            <p>Step 1: Make a profile or log in!</p>
            <p>Step 2: Press Play!</p>
            <p>Step 3: Look at the celebrity on the left</p>
            <p>Step 4: Think! Does the celebrity on the right have more or less monthly searches?</p>
            <p>Step 5: Repeat <step></step>s 3 and 4 until you make a mistake</p>
            <p>Step 6: Submit your score to the leaderboard and play again or log out</p>
        </div>
        <a href="#" class="close-popup">Close</a>
    </div>
</div>

<script>
    function playRandomGame() {
        // Generate a random number between 1 and 96
        var randomNumber = Math.floor(Math.random() * 96) + 1;

        // Construct the new URL
        var newURL = '/game-board/' + [[${Id}]] + '/' + randomNumber;

        // Redirect to the new URL
        location.href = newURL;
    }

</script>
</body>
</html>
