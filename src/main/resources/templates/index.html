<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link th:href="@{/styles/cssandjs/homepage.css}" rel="stylesheet" />
</head>
<body>
<div id="root">
    <section class="homepage-chooser">
        <h1 class="bigger-text">The Higher or Lower Game<br>Bralukai edition</h1>
        <h2 class="smaller-text"><strong>What gets Googled more?</strong></h2>

        <div class="button-container">
            <a onclick="playRandomGame();" id="play" class="button-link">Play</a>
            <a href="#scoreboard-popup" class="button-link">View Scoreboard</a>
            <a href="#create-profile-popup" class="button-link">Register</a>
            <a href="#login-popup" class="button-link">Log in</a>
            <a href="#logout-popup" class="button-link">Log out</a>
        </div>
    </section>
</div>
<div id="scoreboard-popup" class="popup">
    <div class="popup-content">
        <h2>Scoreboard</h2>
        <table class="scoreboard-table">
            <thead>
            <tr>
                <th class="left1">Name</th>
                <th class="right">Highscore</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="player, playerStat : ${Score}">
                <td class="left1" th:text="${player.name}"></td>
                <td class="right">
                    <span th:text="${player.highscore}">&nbsp;</span>
                </td>
                <td class="left2">
                    <span th:if="${playerStat.index == 0}" class="emoji">ðŸ¥‡</span>
                    <span th:if="${playerStat.index == 1}" class="emoji">ðŸ¥ˆ</span>
                    <span th:if="${playerStat.index == 2}" class="emoji">ðŸ¥‰</span>
                </td>
            </tr>
            </tbody>
        </table>
        <a href="#" class="close-popup">Close</a>
    </div>
</div>
<div id="create-profile-popup" class="popup">
    <div class="popup-content">
        <h2>Create Profile</h2>
        <form th:action="@{/create-profile}" method="post">
            <input type="text" name="name" placeholder="Name" required />
            <input type="number" name="age" placeholder="Age" min="7" required />
            <input type="password" name="password" placeholder="Password" minlength="8" required />
            <button type="submit" class="button-link">Create Profile</button>
        </form>
        <p th:text="${createProfileMessage}" class="feedback-message"></p>
        <a href="#" class="close-popup">Close</a>
    </div>
</div>
<div id="login-popup" class="popup">
    <div class="popup-content">
        <h2>Log In</h2>
        <form th:action="@{/login}" method="post">
            <input type="text" name="name" placeholder="Name" required />
            <input type="password" name="password" placeholder="Password" required />
            <button type="submit" class="button-link">Log In</button>
        </form>
        <p th:text="${loginMessage}" class="feedback-message"></p>
        <a href="#" class="close-popup">Close</a>
    </div>
</div>
<div id="logout-popup" class="popup">
    <div class="popup-content">
        <h2>Log Out</h2>
        <p>Submit your score to the leaderboard before logging out:</p>
        <form th:action="@{/submit-score}" method="post">
            <input type="hidden" name="score" th:value="${currentScore}" />
            <button type="submit" class="button-link">Submit Score</button>
        </form>
        <p th:text="${submitScoreMessage}" class="feedback-message"></p>
        <a href="#" class="close-popup">Close</a>
    </div>
</div>


<script>
    function playRandomGame() {
        // Generate a random number between 1 and 96
        var randomNumber = Math.floor(Math.random() * 96) + 1;

        // Construct the new URL
        var newURL = '/game-board/' + randomNumber;

        // Redirect to the new URL
        location.href = newURL;

    }
</script>
</body>
</html>
